var commands = {
	tv_power: [4.5,4.4,0.6,1.6,0.6,1.6,0.6,1.6,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,1.6,0.7,1.6,0.6,1.6,0.6,0.5,0.5,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,1.6,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,1.6,0.6,0.5,0.6,1.6,0.6,1.7,0.6,1.6,0.6,1.7,0.6,1.6,0.6,1.7,0.6],
	tv_mode_tv: [4.5,4.5,0.6,1.6,0.6,1.6,0.6,1.6,0.6,0.4,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,1.6,0.6,1.6,0.6,1.6,0.6,0.5,0.6,0.5,0.6,0.4,0.7,0.4,0.7,0.4,0.7,1.6,0.6,1.6,0.6,0.4,0.7,1.6,0.6,1.6,0.6,0.4,0.6,0.5,0.7,0.4,0.6,0.5,0.6,0.5,0.7,1.6,0.6,0.5,0.6,0.5,0.6,1.6,0.6,1.6,0.6,1.6,0.6,46.7,4.5,4.5,0.6,1.6,0.6,1.6,0.6,1.6,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,1.6,0.7,1.6,0.6,1.6,0.6,0.4,0.7,0.4,0.6,0.5,0.6,0.5,0.6,0.5,0.6,1.6,0.6,1.6,0.6,0.5,0.6,1.6,0.6,1.6,0.6,0.4,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,1.6,0.6,0.5,0.6,0.5,0.6,1.6,0.6,1.7,0.6,1.6,0.6,46.7,4.5,4.5,0.6,1.6,0.6,1.6,0.6,1.6,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,1.6,0.6,1.6,0.6,1.6,0.6,0.4,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,1.7,0.6,1.7,0.5,0.5,0.6,1.6,0.6,1.6,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,1.6,0.6,0.5,0.6,0.5,0.6,1.6,0.6,1.7,0.6,1.6,0.6],
	dvd_power: [8.9,4.4,0.6,0.5,0.6,1.7,0.6,1.6,0.6,0.5,0.5,1.7,0.6,1.6,0.6,0.5,0.6,1.7,0.6,0.5,0.5,0.6,0.5,1.7,0.6,1.6,0.6,0.5,0.6,0.5,0.5,0.5,0.6,0.5,0.5,1.7,0.6,0.5,0.6,0.5,0.5,0.5,0.6,1.7,0.6,0.5,0.6,0.5,0.6,1.7,0.6,0.5,0.6,1.6,0.6,1.6,0.6,1.6,0.6,0.5,0.5,1.7,0.6,1.6,0.6,0.5,0.6,41.0,9.0,2.2,0.6],
	reciever_power: [9.1,4.4,0.6,0.5,0.6,0.5,0.6,0.5,0.6,1.7,0.6,1.6,0.6,1.6,0.6,0.5,0.6,1.6,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,1.6,0.6,0.5,0.6,1.6,0.6,1.6,0.6,1.6,0.6,0.4,0.6,0.5,0.6,1.6,0.6,0.4,0.6,1.6,0.6,0.5,0.6,0.5,0.6,0.5,0.6,1.6,0.6,1.6,0.6,0.5,0.6,44.2,9.0,2.2,0.6,95.7,9.0,2.2,0.6],
	reciever_video2: [9.0,4.4,0.6,0.5,0.6,0.5,0.6,0.5,0.6,1.6,0.6,1.6,0.6,1.6,0.6,0.5,0.6,1.6,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,1.6,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,1.6,0.6,0.5,0.6,1.6,0.6,1.6,0.6,1.6,0.6,1.6,0.6,1.6,0.6,1.6,0.6,44.1,9.0,2.2,0.6,95.7,9.0,2.2,0.6,95.7,8.9,2.2,0.6],
	reciever_dvd: [8.9,4.4,0.6,0.5,0.6,0.5,0.6,0.5,0.6,1.6,0.6,1.6,0.6,1.6,0.6,0.4,0.6,1.6,0.6,1.6,0.6,1.6,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,0.5,0.6,1.6,0.6,1.6,0.7,1.6,0.6,1.6,0.6,1.6,0.6,1.6,0.6,1.6,0.6,1.6,0.6,0.5,0.6,41.9,8.9,2.2,0.6,95.7,9.0,2.2,0.6]
};

var remoteTimeout = false,
	clickCount = 0;

setWatch(function(e) {
	clickCount++;

	if (remoteTimeout) {
		clearTimeout(remoteTimeout);
	}

	if (e.time - e.lastTime > 2) {
		clickCount = 0;
		remote(false);
	} else {
		remoteTimeout = setTimeout(function () {
			remoteTimeout = false;
			remote(clickCount);
			clickCount = 0;
		}, 1000);
	}
}, BTN, { edge: 'falling', debounce: 50, repeat: true });

function remote(clickCount) {
	if (clickCount === false) {
		digitalWrite(LED1, 1);
	}
	else if (clickCount === 1) {
		digitalWrite(LED2, 1);
		sendIr([commands.tv_power]);
	}
	else if (clickCount === 2) {
		digitalWrite(LED3, 1);
	}

	setTimeout(function () {
		digitalWrite(LED1, 0);
		digitalWrite(LED2, 0);
		digitalWrite(LED3, 0);
	}, 1000);
}

function sendIr(cmds) {
	for (var i = 0; i < cmds.length; i++) {
		Puck.IR(cmds[i]);
	}
}
